---
title: 2018-10-18http，https 
tags: http,https,tls,ssl,加密算法
grammar_cjkRuby: true
---
## http
###三大特点
###### 请求与响应的模式 http1.1
- http1.0HTTP 1.0规定浏览器与服务器只保持短暂的连接，浏览器的每次请求都需要与服务器建立一个TCP连接，当一个页面有很多的网络请求时，会变得非常耗时。
- 为了克服HTTP 1.0的这个缺陷，HTTP 1.1支持持久连接，在一个TCP连接上可以传送多个HTTP请求和响应，减少了建立和关闭连接的消耗和延迟。一个包含有许多图像的网页文件的多个请求和应答可以在一个连接中传输。HTTP 1.1还允许客户端不用等待上一次请求结果返回，就可以发出下一次请求，但服务器端必须按照接收到客户端请求的先后顺序依次回送响应结果，以保证客户端能够区分出每次请求的响应内容，这样也显著地减少了整个下载过程所需要的时间。
**持久连接**
######  无状态
HTTP无状态协议，是指协议对于事务处理没有记忆能力。缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能导致每次连接传送的数据量增大。另一方面，在服务器不需要先前信息时它的应答就较快。
HTTP本身是一个无状态的连接协议，为了支持客户端与服务器之间的交互，我们就需要通过不同的技术为交互存储状态，而这些不同的技术就是Cookie和Session了。

######  明文传输
### 请求与响应模式
###### 请求：
	        请求行信息
	           GET /index.html HTTP/1.1
	        请求头信息
	        	key:value
	        	主要描述了服务端返回内容的一些限制以及客户端的一些信息
	        请求正文
	            get：没有正文，数据是通过请求行信息后面地址带过去
	            post：在正文中发送过去的

######  响应：
	        响应行信息
	        	HTTP/1.1 状态码 描述
	        响应头信息
	        	key：value
	        	描述服务端返回的内容的信息
	        响应正文
	        	真正返回的内容

###### 状态码：描述了服务端返回的内容的状态的编码

200  正常
400 请求语法有误
401 要求身份验证
403 服务器拒绝服务
404 找不到资源
405 方法不被允许
500 服务器异常
503 服务器超载或在维护，稍后重试
301、302  重定向。新的url会在报文的头信息中返回，浏览器使用该url重新发请求
                 304  所请求的资源未被修改，使用的是缓存。

###### 301适合永久重定向
301比较常用的场景是使用域名跳转。比如，我们访问 http://www.baidu.com 会跳转到 https://www.baidu.com，发送请求之后，就会返回301状态码，然后返回一个location，提示新的地址，浏览器就会拿着这个新的地址去访问。 
###### 302用来做临时跳转
比如未登陆的用户访问用户中心重定向到登录页面。
###### 区别
302重定向只是暂时的重定向，搜索引擎会抓取新的内容而保留旧的地址，因为服务器返回302，所以，搜索搜索引擎认为新的网址是暂时的。
而301重定向是永久的重定向，搜索引擎在抓取新的内容的同时也将旧的网址替换为了重定向之后的网址。
*****
## https
- HTTPS（全称：Hyper Text Transfer Protocol over Secure Socket Layer），是以安全为目标的HTTP通道，即HTTP下加入SSL层，HTTPS的安全基础是SSL.
- SSL(Secure Sockets Layer 安全套接层),及其继任者传输层安全(Transport Layer Security，TLS)是为网络通信提供安全及数据完整性的一种安全协议。TLS与SSL在传输层对网络连接进行加密。
#### 消息摘要
消息摘要（Message Digest）又称为数字摘要(Digital Digest)。它是一个唯一对应一个消息或文本的固定长度的值，它由一个单向Hash加密函数对消息进行作用而产生，消息摘要保证了消息的完整性。
用于文件提取特征码作为辨识文件是否改变的唯一标示。
###### SHA
安全散列算法（英语：Secure Hash Algorithm，缩写为SHA）是一个密码散列函数家族，能计算出消息摘要的算法。
###### MD5
MD5消息摘要算法（英语：MD5 Message-Digest Algorithm），一种被广泛使用的密码散列函数，可以产生出一个128位（16字节）的散列值（hash value），用于确保信息传输完整一致。
1. 长度一定
2. 细微的变化也会发生巨大的md5码变化
3. 不可逆
4. 多次md5加密后很难破解
5. 通过加salt（盐值）可以实现同样的密码，加密后的密文不一致

#### 密钥
###### 对称加密
加密解密都用一个密钥，客户端和服务端需要同时拥有。就必须通过网络传输，传输就有安全风险。
算法：DES ADES 3DES
###### 非对称加密
密钥是一对，分公钥和私钥。任一把钥匙加密，需要另一把钥匙解密。
一般自己生成一对密钥，自己留私钥，把公钥给别人，让别人用公钥加密，数据给自己后用私钥解密。
算法：RSA
#### https如何保证安全
1. 客户端发送网络连接请求，服务端返回它的ca证书和公钥等信息
2. 客户端验证ca证书后，自己生成对称密钥，用服务端的公钥加密对称密钥，再传输给服务端。
3. 服务端用私钥解密后，得到客户端的对称密钥。这样，双方都安全的获得了对称密钥。
4. 接下来，连接建立完毕，双方用对称密钥进行数据加密传输。
